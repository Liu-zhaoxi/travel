<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>登录页面</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/login.css">
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css">

    <!-- JQuery(Bootstrap的所有JavaScript插件都依赖JQuery,所以必须放在前边)-->
    <script src="js/jquery-3.3.1.js"></script>
    <!-- 加载Bootstrap的所有JavaScript插件，可以根据需要只加载单个插件 -->
    <script src="js/bootstrap.min.js"></script>

    <script src="js/header.js"></script>

    <script>

        $(function () {
            //1.给登录按钮绑定单击事件
            $("#btn_sub").click(function () {
                //2.发送ajax请求，提交表单数据
                $.post("user/login", $("#loginForm").serialize(), function (data) {
                    //data:{flag:false,errorMsg:''}
                    if (data.flag) {
                        //登录成功
                        location.href = "index.html";
                    } else {
                        //登录失败
                        $("#errorMsg").html(data.errorMsg);
                    }
                });
            });
        });
        //3.处理响应结果


    </script>
</head>

<body>
<!-- 页眉部分 -->
<header class="container-fluid" id="header">
    <!-- 顶部广告图片 -->
    <div class="row">
        <img src="images/top_banner.jpg" class="img-responsive" id="ad">
    </div>
    <!-- 功能条 -->
    <div class="row">
        <nav class="navbar navbar-default" id="nav">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><img src="images/login_logo.png" id="brand"></a>
                </div>

                <!-- Collect the nav_common links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse login_btn" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav" id="category"></ul>
                    <ul class="nav navbar-nav navbar-right" id="span_username">
                        <li class="btn_nav"><a href="login.html">登录</a></li>
                        <li class="btn_nav"><a href="register.html">注册</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>

<section id="login_wrap">
    <div class="fullscreen-bg" style="background: url(images/login_bg.png);height: 532px;">
    </div>
    <div class="login-box">
        <div class="title">
            <img src="images/login_logo.png" alt="">
            <span>欢迎登录旅游网站</span>
        </div>
        <div class="login_inner">

            <!--登录错误提示消息-->
            <div id="errorMsg" class="alert alert-danger"></div>
            <form id="loginForm" action="" method="post" accept-charset="utf-8">
                <input type="hidden" name="action" value="login"/>
                <input name="username" type="text" placeholder="请输入账号" autocomplete="off">
                <input name="password" type="password" placeholder="请输入密码" autocomplete="off">
                <div class="verify">
                    <input name="check" type="text" placeholder="请输入验证码" autocomplete="off" id="check">
                    <span><img src="checkCode" alt="" onclick="changeCheckCode(this)"></span>
                    <script type="text/javascript">
                        //图片点击事件
                        function changeCheckCode(img) {
                            img.src = "checkCode?" + new Date().getTime();
                        }
                    </script>
                </div>
                <div class="submit_btn">
                    <br>
                    <button type="button" id="btn_sub">登录</button>
                </div>
            </form>
            <div class="reg">没有账户？<a href="javascript:;">立即注册</a></div>
        </div>
    </div>
</section>

<!-- 页脚部分 -->
<footer class="container-fluid">
    <div class="row">
        <img src="images/footer_service.png" class="img-responsive image">
    </div>
    <div class="row" id="company">
        <span>CopyRight&nbsp;&copy;&nbsp;2020-2021,All Rights Reserved</span>
    </div>
</footer>
</body>

</html>